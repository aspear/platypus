{"basePath":"/csp/gateway","consumes":["application/json"],"definitions":{"GetMetricsResponse":{"items":{"$ref":"#/definitions/Metrics"},"type":"array"},"GetStatusResponse":{"properties":{"messages":{"items":{"$ref":"#/definitions/Status"},"type":"array"}},"required":["messages"],"type":"object"},"GetTemplatesResponse":{"items":{"$ref":"#/definitions/Templates"},"type":"array"},"Metrics":{"example":{"date":"2018-01-01","metrics":{"blocks":0,"bounce_drops":0,"bounces":0,"clicks":0,"deferred":0,"delivered":0,"invalid_emails":0,"opens":0,"processed":0,"requests":0,"spam_report_drops":0,"spam_reports":0,"unique_clicks":0,"unique_opens":0,"unsubscribe_drops":0,"unsubscribes":0}},"properties":{"date":{"description":"Date for that day/week/month (depending on the aggregated_by selection)","type":"string"},"metrics":{"description":"Metrics for the day/week/month specified in the date field","type":"object"}},"required":["date","metrics"],"type":"object"},"PatchTemplateMetadata":{"example":{"bcc":[["exampleBCC@vmware.com"]],"cc":[["exampleCC@vmware.com"]],"defaultTemplateLanguage":"es","from":"exampleFrom@vmware.com","recipients":{"orgID":["d11bba53-ad7e-4639-8999-1281cc6ae3b3"],"roles":["org_owner"]},"replyTo":{"email":"exampleReplyTo@vmware.com","name":"example_name"}},"properties":{"bcc":{"description":"The bcc list for the email","items":{"type":"string"},"type":"array"},"cc":{"description":"The cc list for the email","items":{"type":"string"},"type":"array"},"defaultTemplateLanguage":{"description":"The default template language. Can be any of [zh-Hans, fr, ja, es, zh-Hant, de, en, ko]","type":"string"},"enableSuppressionGroup":{"description":"By default, suppression (unsubscribe) capability is disabled. If you would like the recipients of your emails to be able to unsubscribe to this template group, set this to true. A suppression group with the template name will be created, that will be exposed to your recipient to unsubscribe from","enum":["true","false"],"type":"string"},"from":{"description":"The sender email address. If not specified, will be: donotreply@vmware.com","type":"string"},"recipients":{"description":"List of key-value pairs that would specify the recipients of the email. It should be in the format {\u003crecipient-type\u003e: \u003clist of users/orgID/roles\u003e}. Valid combinations: 1. To send to users with roles service_owner and org_owner in org orgUUID: [{roles: [service_owner, org_owner]}{orgID: [orgUUID]}] 2. To send to all users in org orgUUID: {orgID: [orgUUID]} 3. To send to users a@vmware.com and b@vmware.com: {users: [a@vmware.com, b@vmware.com]}","type":"object"},"replyTo":{"description":"The reply to for the email","properties":{"email":{"description":"Email to be used for reply to. If not specified, will be: donotreply@vmware.com","type":"string"},"name":{"description":"Name to be used for reply to/from.","type":"string"}},"type":"object"}},"type":"object"},"PostEmailPOSRequest":{"example":{"message":{"notificationData":{"recipients":{"orgID":["example-org-id"],"roles":["service_owner"]},"substitutions":{"{{name}}":"Jane","{{promo_code}}":"PROMO1"}}},"messageID":123,"messageTime":"1534803214733","messageType":"SAMPLE_MESSAGE","publisherID":"9a5323da-3560-42d5-ad4c-7fe2d0ef3ae6","subscriptionID":"6a4983da-3560-42d5-ad4c-7fe2d0ef3ae6"},"properties":{"message":{"description":"The message","properties":{"emailAttributes":{"$ref":"#/definitions/PostEmailRequest"}},"type":"object"},"messageID":{"description":"ID of the message","type":"string"},"messageTime":{"description":"The time the message was sent","type":"string"},"messageType":{"description":"The messageType this email is triggered from","type":"string"},"publisherID":{"description":"The publisher of the message","type":"string"},"subscriptionID":{"description":"The The subscription id of the service","type":"string"}},"required":["message","messageID"],"type":"object"},"PostEmailPOSResponse":{"properties":{"messageID":{"description":"ID of the message from the publisher","type":"string"}},"required":["messageID"],"type":"object"},"PostEmailRequest":{"example":{"recipients":{"orgID":["d11bba53-ad7e-4639-8999-1281cc6ae3b3"],"roles":["service_owner"]},"substitutions":{"promo_code":"PROMO1","service_name":"Service X"}},"properties":{"recipients":{"description":"List of key-value pairs that would specify the recipients of the email. It should be in the format {\u003crecipient-type\u003e: \u003clist of users/orgID/roles\u003e}. Valid combinations: 1. To send to users with roles service_owner and org_owner in org orgUUID: [{roles: [service_owner, org_owner]}{orgID: [orgUUID]}] 2. To send to all users in org orgUUID: {orgID: [orgUUID]} 3. To send to users a@vmware.com and b@vmware.com: {users: [a@vmware.com, b@vmware.com]}","type":"object"},"substitutions":{"additionalProperties":true,"description":"Substitutions to make in the template","type":"object"}},"type":"object"},"PostTemplatesRequest":{"example":{"bcc":["exampleBCC@vmware.com"],"cc":["exampleCC@vmware.com"],"defaultTemplateLanguage":"en","from":"exampleFrom@vmware.com","messageType":"example_msg_type","name":"exampleTemplate","recipients":{"orgID":["d11bba53-ad7e-4639-8999-1281cc6ae3b3"],"roles":["service_owner"]},"replyTo":{"email":"exampleReplyTo@vmware.com","name":"example_name"},"subject":"Hello {{firstName}}!","templateType":"transactional","templates":[{"HTMLContents":"\u003chtml\u003e\u003cbody\u003eHello {{service_name}}, You were assigned a promotion: {{promo_code}}\u003c/body\u003e\u003c/html\u003e","language":"en"}]},"properties":{"bcc":{"description":"The bcc list for the email. CC, BCC should be unique","items":{"type":"string"},"type":"array"},"cc":{"description":"The cc list for the email. CC, BCC should be unique","items":{"type":"string"},"type":"array"},"defaultTemplateLanguage":{"description":"The default template language. Can be any of [zh-Hans, fr, ja, es, zh-Hant, de, en, ko]","type":"string"},"disableDefaultStyling":{"description":"By default, common styles(header and footer) are applied to email contents. Common styles can be disabled by setting the flag disableDefaultStyling to 'true'","type":"string"},"enableSuppressionGroup":{"description":"By default, suppression (unsubscribe) capability is disabled. If you would like the recipients of your emails to be able to unsubscribe to this template group, set this to true. A suppression group with the template name will be created, that will be exposed to your recipient to unsubscribe from","type":"string"},"from":{"description":"The sender email address. If not specified, will be: donotreply@vmware.com","type":"string"},"messageType":{"description":"HTTP message bus message type to be subscribed to","type":"string"},"name":{"description":"Name of the template group to be created","type":"string"},"recipients":{"description":"List of key-value pairs that would specify the recipients of the email. It should be in the format {\u003crecipient-type\u003e: \u003clist of users/orgID/roles\u003e}. Valid combinations: 1. To send to users with roles service_owner and org_owner in org orgUUID: [{roles: [service_owner, org_owner]}{orgID: [orgUUID]}] 2. To send to all users in org orgUUID: {orgID: [orgUUID]} 3. To send to users a@vmware.com and b@vmware.com: {users: [a@vmware.com, b@vmware.com]}.","type":"object"},"replyTo":{"description":"The reply to for the email","properties":{"email":{"description":"Email to be used for reply to. If not specified, will be: donotreply@vmware.com","type":"string"},"name":{"description":"Name to be used for reply to/from.","type":"string"}},"type":"object"},"subject":{"description":"Subject of the template","type":"string"},"templateType":{"description":"Type of the template","enum":["transactional"],"type":"string"},"templates":{"description":"The list of templates","items":{"$ref":"#/definitions/Template"},"type":"array"}},"required":["templateType","name","templates","defaultTemplateLanguage","messageType","replyTo","subject"],"type":"object"},"Status":{"example":{"clicks_count":0,"from_email":"test@vmware.com","last_event_time":"2019-04-29T15:40:06Z","opens_count":0,"status":"delivered","subject":"test_subject","to_email":"test1@vmware.com"},"properties":{"clicks_count":{"description":"The number of clicks on that email","type":"object"},"from_email":{"description":"The from email address","type":"string"},"last_event_time":{"description":"The time of the last event for that recipient","type":"string"},"opens_count":{"description":"The number of open counts for that email","type":"object"},"status":{"description":"Status of the email","type":"string"},"subject":{"description":"The subject of the email","type":"string"},"to_email":{"description":"The recipient the email was addressed to","type":"string"}},"type":"object"},"Template":{"example":{"HTMLContents":"\u003chtml\u003e\u003cbody\u003eHello {{service_name}}, You were assigned a promotion: {{promo_code}}\u003c/body\u003e\u003c/html\u003e","language":"en","subject":"Hello {{firstName}}!"},"properties":{"HTMLContents":{"description":"The HTML template","type":"string"},"language":{"description":"The language of the template. Can be any of [zh-Hans, fr, ja, es, zh-Hant, de, en, ko]","type":"string"},"subject":{"description":"Subject of the template","type":"string"}},"required":["HTMLContents","language"],"type":"object"},"TemplateMetadata":{"properties":{"bcc":{"description":"The bcc list for the email. CC, BCC should be unique","items":{"type":"string"},"type":"array"},"cc":{"description":"The cc list for the email. CC, BCC should be unique","items":{"type":"string"},"type":"array"},"defaultTemplateLanguage":{"description":"The default template language. Can be any of [zh-Hans, fr, ja, es, zh-Hant, de, en, ko]","type":"string"},"from":{"description":"The sender email address. If not specified, will be: donotreply@vmware.com","type":"string"},"messageType":{"description":"HTTP message bus message type to be subscribed to","type":"string"},"recipients":{"description":"List of key-value pairs that would specify the recipients of the email. It should be in the format {\u003crecipient-type\u003e: \u003clist of users/orgID/roles\u003e}. Valid combinations: 1. To send to users with roles service_owner and org_owner in org orgUUID: [{roles: [service_owner, org_owner]}{orgID: [orgUUID]}] 2. To send to all users in org orgUUID: {orgID: [orgUUID]} 3. To send to users a@vmware.com and b@vmware.com: {users: [a@vmware.com, b@vmware.com]}","type":"object"},"replyTo":{"description":"The reply to for the email","properties":{"email":{"description":"Email to be used for reply to. If not specified, will be: donotreply@vmware.com","type":"string"},"name":{"description":"Name to be used for reply to/from.","type":"string"}},"type":"object"}},"type":"object"},"TemplateResponse":{"allOf":[{"$ref":"#/definitions/Template"},{"type":"object"}],"example":{"templateID":"d11bba53-ad7e-4639-8999-1281cc6ae3b3"},"properties":{"templateID":{"description":"The ID of the template","type":"string"}},"required":["templateID"],"type":"object"},"TemplateWithSubject":{"example":{"HTMLContents":"\u003chtml\u003e\u003cbody\u003eHello {{service_name}}, You were assigned a promotion: {{promo_code}}\u003c/body\u003e\u003c/html\u003e","language":"en","subject":"Hello {{firstName}}!"},"properties":{"HTMLContents":{"description":"The HTML template","type":"string"},"disableDefaultStyling":{"description":"By default, common styles(header and footer) are applied to email contents. Common styles can be disabled by setting the flag disableDefaultStyling to 'true'","type":"string"},"language":{"description":"The language of the template. Can be any of [zh-Hans, fr, ja, es, zh-Hant, de, en, ko]","type":"string"},"subject":{"description":"Subject of the template","type":"string"}},"required":["HTMLContents","language","subject"],"type":"object"},"Templates":{"example":{"templateGroupID":"c58cd9fd-dd5b-40c8-a3a4-374e53e338a5","templates":{"HTMLContents":"\u003chtml\u003e\u003cbody\u003eHello {{service_name}}, You were assigned a promotion: {{promo_code}}\u003c/body\u003e\u003c/html\u003e","language":"en","subject":"Hello {{firstName}}!","templateID":"d11bba53-ad7e-4639-8999-1281cc6ae3b3"}},"properties":{"templateGroupID":{"description":"Identifier of the template","type":"string"},"templates":{"description":"The list of templates to be patched","items":{"$ref":"#/definitions/TemplateResponse"},"type":"array"}},"required":["templateGroupID"],"type":"object"}},"info":{"description":"CSP Email Service documentation","title":"CSP Email Service","version":"1.0.0"},"paths":{"/es/api/v1/publishers/{publisherID}/metrics":{"get":{"description":"Requires Platform Operator/ Service Owner token","parameters":[{"description":"Identifier of the publisher","in":"path","name":"publisherID","required":true,"type":"string"},{"description":"Optional start date to fetch the metrics from in yyyy-mm-dd format. Defaults to today","in":"query","name":"start_date","required":false,"type":"string"},{"description":"Optional end date to define when to retrieve metrics till. Defaults to today","in":"query","name":"end_date","required":false,"type":"string"},{"description":"Optional parameter to define how to group the metrics. Defaults to day","enum":["day","week","month"],"in":"query","name":"aggregated_by","required":false,"type":"string"}],"responses":{"200":{"description":"Successful operation","schema":{"$ref":"#/definitions/GetMetricsResponse"}}},"summary":"Endpoint to get account metrics with","tags":["Account Information"]}},"/es/api/v1/publishers/{publisherID}/status":{"get":{"description":"Requires CSP user/service access token","parameters":[{"description":"Identifier of the publisher","in":"path","name":"publisherID","required":true,"type":"string"},{"default":10,"description":"Optional limit to the number of responses.","in":"query","name":"limit","required":false,"type":"integer"},{"description":"Optional parameter that enables to query only emails with a specific status.","enum":["processed","delivered","not_delivered"],"in":"query","name":"status","required":false,"type":"string"},{"description":"Optional parameters that enables to query  emails with to_email","in":"query","name":"to_email","required":false,"type":"string"},{"description":"Optional parameters that enables to query  emails with from_email","in":"query","name":"from_email","required":false,"type":"string"},{"description":"Optional parameters that enables to query  emails with subject","in":"query","name":"subject","required":false,"type":"string"},{"description":"Optional parameters that enables to query  emails with date range from start_date to end_date in YYYY-MM-DDTHH:MM:SSZ format","in":"query","name":"start_date","required":false,"type":"string"},{"description":"Optional parameters that enables to query  emails with date range from start_date to end_date in YYYY-MM-DDTHH:MM:SSZ format","in":"query","name":"end_date","required":false,"type":"string"}],"responses":{"200":{"description":"Successful operation","schema":{"$ref":"#/definitions/GetStatusResponse"}}},"summary":"Endpoint to get status for the email requests for the publisher ID specified","tags":["Account Information"]}},"/es/api/v1/publishers/{publisherID}/templates":{"get":{"description":"Requires CSP user/ service access token","parameters":[{"description":"Identifier of the publisher","in":"path","name":"publisherID","required":true,"type":"string"}],"responses":{"200":{"description":"Successful operation","schema":{"$ref":"#/definitions/GetTemplatesResponse"}}},"summary":"Endpoint to get templates","tags":["Templates Management"]},"post":{"description":"Requires CSP user/ service access token","parameters":[{"description":"Identifier of the publisher","in":"path","name":"publisherID","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PostTemplatesRequest"}}],"responses":{"201":{"description":"Successful operation","schema":{"$ref":"#/definitions/Templates"}}},"summary":"Endpoint to register templates with","tags":["Templates Management"]}},"/es/api/v1/publishers/{publisherID}/templates/{templateGroupID}":{"delete":{"description":"Requires CSP user/ service access token","parameters":[{"description":"Identifier of the publisher","in":"path","name":"publisherID","required":true,"type":"string"},{"description":"ID of the template group","in":"path","name":"templateGroupID","required":true,"type":"string"}],"responses":{"200":{"description":"Successful operation"}},"summary":"Endpoint to delete a template with","tags":["Templates Management"]},"patch":{"description":"Requires CSP user/ service access token","parameters":[{"description":"Identifier of the publisher","in":"path","name":"publisherID","required":true,"type":"string"},{"description":"ID of the template group","in":"path","name":"templateGroupID","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PatchTemplateMetadata"}}],"responses":{"200":{"description":"Successful operation"}},"summary":"Endpoint to modify a template group","tags":["Templates Management"]}},"/es/api/v1/publishers/{publisherID}/templates/{templateGroupID}/languages":{"post":{"description":"Requires CSP user/ service access token","parameters":[{"description":"Identifier of the publisher","in":"path","name":"publisherID","required":true,"type":"string"},{"description":"ID of the template group","in":"path","name":"templateGroupID","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/TemplateWithSubject"}}],"responses":{"201":{"description":"Successful operation","schema":{"$ref":"#/definitions/TemplateResponse"}}},"summary":"Endpoint to add a template to a template group","tags":["Template Management"]}},"/es/api/v1/publishers/{publisherID}/templates/{templateGroupID}/languages/{language}":{"patch":{"description":"Requires CSP user/ service access token","parameters":[{"description":"Identifier of the publisher","in":"path","name":"publisherID","required":true,"type":"string"},{"description":"Language of the template to edit. The language will be taken from path param and not from the body in the request.","in":"path","name":"language","required":true,"type":"string"},{"description":"ID of the template group","in":"path","name":"templateGroupID","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/TemplateWithSubject"}}],"responses":{"200":{"description":"Successful operation","schema":{"$ref":"#/definitions/TemplateResponse"}}},"summary":"Endpoint to update a template content in a template group","tags":["Template Management"]}},"/es/api/v1/publishers/{publisherID}/templates/{templateGroupID}/metadata":{"get":{"description":"Requires CSP user/ service access token","parameters":[{"description":"Identifier of the publisher","in":"path","name":"publisherID","required":true,"type":"string"},{"description":"ID of the template group","in":"path","name":"templateGroupID","required":true,"type":"string"}],"responses":{"200":{"description":"Successful operation","schema":{"$ref":"#/definitions/TemplateMetadata"}}},"summary":"Endpoint to get template group metadata","tags":["Templates Management"]}}},"produces":["application/json"],"security":[{"token":[]}],"securityDefinitions":{"token":{"description":"An access token obtained from CSP","in":"header","name":"csp-auth-token","type":"apiKey"}},"swagger":"2.0","tags":[{"description":"CSP Email Service Operations","name":"CSP Email Service"}]}
