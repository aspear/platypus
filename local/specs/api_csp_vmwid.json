{"host":"console-stg.cloud.vmware.com","tags":[{"description":"MFA Audit Operations","name":"MFA Audit"},{"description":"MFA Status Operations","name":"MFA Status"},{"description":"Principal MFA Operations","name":"Principal MFA"}],"securityDefinitions":{"token":{"in":"header","name":"csp-auth-token","type":"apiKey"}},"produces":["application/json"],"definitions":{"MfaAuttributeDetailsDto":{"properties":{"deviceName":{"allowEmptyValue":false,"type":"string","description":"Device name"}},"title":"MfaAuttributeDetailsDto","type":"object"},"MfaUsersStatusRequest":{"type":"object","properties":{"usernames":{"items":{"type":"string"},"allowEmptyValue":false,"type":"array","description":"Usernames"}},"title":"MfaUsersStatusRequest","required":["usernames"]},"UpdateMfaRequest":{"type":"object","properties":{"password":{"type":"string"},"turnedOn":{"type":"boolean"}},"title":"UpdateMfaRequest","required":["password","turnedOn"]},"UsersMfaStatusDto":{"properties":{"failed":{"items":{"$ref":"#/definitions/UserMfaFailStatusDto"},"type":"array"},"succeeded":{"items":{"$ref":"#/definitions/UserMfaStatusDto"},"type":"array"}},"title":"UsersMfaStatusDto","type":"object"},"UserMfaFailStatusDto":{"properties":{"username":{"type":"string"},"errorMessage":{"type":"string"}},"title":"UserMfaFailStatusDto","type":"object"},"PrincipalMfaAuditLogRequest":{"type":"object","properties":{"endDate":{"description":"End Date","allowEmptyValue":false,"type":"integer","format":"int64"},"deviceNames":{"items":{"type":"string"},"allowEmptyValue":false,"type":"array","description":"Device names"},"startDate":{"description":"Start Date","allowEmptyValue":false,"type":"integer","format":"int64"},"actions":{"items":{"enum":["MFA_ACTIVATION","MFA_DEACTIVATION","MFA_ENABLE","MFA_DISABLE","MFA_DEVICE_NAME_UPDATE","MFA_AUTHENTICATION_SUCCESS","MFA_AUTHENTICATION_FAILURE","MFA_RECOVERY_CODE_AUTHENTICATION_SUCCESS","MFA_RECOVERY_CODE_AUTHENTICATION_FAILURE","MFA_RECOVERY_CODES_GENERATION","AUTHENTICATION_WITHOUT_MFA"],"type":"string"},"allowEmptyValue":false,"type":"array","description":"Actions"},"eventIds":{"items":{"type":"string"},"allowEmptyValue":false,"type":"array","description":"Event Ids"},"pageLimit":{"description":"Page Limit","allowEmptyValue":false,"type":"integer","format":"int32"},"pageStart":{"description":"Page Start","allowEmptyValue":false,"type":"integer","format":"int32"}},"title":"PrincipalMfaAuditLogRequest","required":["endDate","startDate"]},"PagedPostResponse«MfaAuditLogDto»":{"properties":{"startIndex":{"allowEmptyValue":false,"description":"Start index of the results - By default index starts at 1","format":"int32","example":5,"type":"integer"},"totalResults":{"allowEmptyValue":false,"description":"Total number of results","format":"int32","example":2000,"type":"integer"},"itemsPerPage":{"allowEmptyValue":false,"description":"Number of items per page - By default 200 items per page","format":"int32","example":25,"type":"integer"},"results":{"items":{"$ref":"#/definitions/MfaAuditLogDto"},"allowEmptyValue":false,"type":"array","description":"List of results"}},"title":"PagedPostResponse«MfaAuditLogDto»","type":"object"},"UserMfaStatusDto":{"properties":{"turnedOn":{"type":"boolean"},"deviceName":{"type":"string"},"username":{"type":"string"},"activated":{"type":"boolean"}},"title":"UserMfaStatusDto","type":"object"},"MfaAuditLogDto":{"properties":{"action":{"allowEmptyValue":false,"type":"string","description":"Action"},"eventId":{"allowEmptyValue":false,"type":"string","description":"Event Id"},"username":{"allowEmptyValue":false,"type":"string","description":"Username"},"modifiedBy":{"allowEmptyValue":false,"type":"string","description":"Modified by"},"eventDate":{"description":"Event date","allowEmptyValue":false,"type":"integer","format":"int64"},"details":{"$ref":"#/definitions/MfaAuttributeDetailsDto","allowEmptyValue":false,"description":"Mfa Attribute Details"}},"title":"MfaAuditLogDto","type":"object"},"UpdateMfaResponse":{"properties":{"turnedOn":{"type":"boolean"}},"title":"UpdateMfaResponse","type":"object"},"MfaAuditLogRequest":{"type":"object","properties":{"deviceNames":{"items":{"type":"string"},"allowEmptyValue":false,"type":"array","description":"Device names"},"endDate":{"description":"End Date","allowEmptyValue":false,"type":"integer","format":"int64"},"usernames":{"items":{"type":"string"},"allowEmptyValue":false,"type":"array","description":"Usernames"},"startDate":{"description":"Start Date","allowEmptyValue":false,"type":"integer","format":"int64"},"actions":{"items":{"enum":["MFA_ACTIVATION","MFA_DEACTIVATION","MFA_ENABLE","MFA_DISABLE","MFA_DEVICE_NAME_UPDATE","MFA_AUTHENTICATION_SUCCESS","MFA_AUTHENTICATION_FAILURE","MFA_RECOVERY_CODE_AUTHENTICATION_SUCCESS","MFA_RECOVERY_CODE_AUTHENTICATION_FAILURE","MFA_RECOVERY_CODES_GENERATION","AUTHENTICATION_WITHOUT_MFA"],"type":"string"},"allowEmptyValue":false,"type":"array","description":"Actions"},"eventIds":{"items":{"type":"string"},"allowEmptyValue":false,"type":"array","description":"Event Ids"},"pageLimit":{"description":"Page Limit","allowEmptyValue":false,"type":"integer","format":"int32"},"pageStart":{"description":"Page Start","allowEmptyValue":false,"type":"integer","format":"int32"}},"title":"MfaAuditLogRequest","required":["endDate","startDate","usernames"]}},"info":{"title":"IAM VMwareID","description":"List of all IAM VMwareID APIs","version":"1.0"},"swagger":"2.0","consumes":["application/json"],"basePath":"/csp/gateway","paths":{"/iam/vmwid/api/mfa/status":{"post":{"responses":{"400":{"description":"Invalid email OR Cannot exceed the limit of 20 usernames"},"401":{"description":"Unauthorized"},"500":{"description":"Internal Server Error"},"200":{"schema":{"$ref":"#/definitions/UsersMfaStatusDto"},"description":"OK"},"403":{"description":"Forbidden"}},"summary":"Retrieves MFA status of listed users","operationId":"getUsersMfaStatusUsingPOST","tags":["MFA Status"],"security":[{"token":["global"]},{"cspAuthentication":["platform_operator"]}],"description":"Retrieves MFA status of listed users.  In case account is not linked to MFA the 'activated' field will be false and the rest of the fields (except username) will be empty. Response contains two lists - containing succeeded and failed user records. \n### Access Policy:\n| Role | User Accounts | Service Accounts (Client Credentials Applications)  |\n| ----- | ----- | ---------- |\n| Organization Member | &#x0274c; | &#x0274c; |\n| Organization Owner | &#x0274c; | &#x0274c; |\n| Service Owner | &#x0274c; | &#x0274c; |\n| Support User | &#x0274c; | &#x0274c; |\n| Read-only Operator | &#x2714;&#xFE0F; | &#x0274c; |\n","parameters":[{"description":"Usernames","in":"body","name":"mfaUsersStatusRequest","schema":{"$ref":"#/definitions/MfaUsersStatusRequest"},"required":true}]}},"/iam/vmwid/api/principal/mfa/status":{"get":{"summary":"Get Principal MFA Satus","operationId":"getPrincipalMfaStatusUsingGET","tags":["Principal MFA"],"security":[{"token":["global"]}],"responses":{"500":{"description":"Internal Server Error"},"401":{"description":"Unauthenticated User"},"200":{"schema":{"$ref":"#/definitions/UserMfaStatusDto"},"description":"OK"},"403":{"description":"Forbidden"}},"description":"Get principal MFA status.<br>Principal user is identified via a token. The token should be passed in a header called csp-auth-token.\n### Access Policy:\n| Role | User Accounts | Service Accounts (Client Credentials Applications)  |\n| ----- | ----- | ---------- |\n| All Roles | &#x2714;&#xFE0F; | &#x0274c; |\n"}},"/iam/vmwid/api/principal/mfa/audit":{"post":{"responses":{"400":{"description":"End date must be greater than start date OR Start date cannot be of future OR Date should be given as epoch OR Specified action is not supported OR Cannot exceed the limit of 20 event ids OR Cannot exceed the limit of 20 device names ORCombination of page and size exceeds max limit of records fetch"},"401":{"description":"Unauthenticated User"},"404":{"description":"No user with given token exists"},"403":{"description":"Forbidden"},"200":{"schema":{"$ref":"#/definitions/PagedPostResponse«MfaAuditLogDto»"},"description":"OK"},"500":{"description":"Internal Server Error"}},"summary":"Retrieves all the audits for the MFA","operationId":"getMfaAuditLogUsingPOST_1","tags":["Principal MFA"],"security":[{"token":["global"]}],"description":"Retrieves all the audits for the MFA de/activation, enable/disable, login, login using recovery code and recovery code generation/deletion. The events received are sorted by date in descending order ie the most recent ones will apear first. <br>Principal user is identified via a token. The token should be passed in a header called csp-auth-token.\n### Access Policy:\n| Role | User Accounts | Service Accounts (Client Credentials Applications)  |\n| ----- | ----- | ---------- |\n| All Roles | &#x2714;&#xFE0F; | &#x0274c; |\n","parameters":[{"description":"Principal MFA audit","in":"body","name":"auditLogRequest","schema":{"$ref":"#/definitions/PrincipalMfaAuditLogRequest"},"required":true}]}},"/iam/vmwid/api/mfa/audit":{"post":{"responses":{"400":{"description":"End date must be greater than start date OR Start date cannot be of future OR Date should be given as epoch OR Invalid email OR Cannot exceed the limit of 20 usernames OR Specified action is not supported OR Cannot exceed the limit of 20 event ids OR Cannot exceed the limit of 20 device names"},"401":{"description":"Unauthorized"},"500":{"description":"Internal Server Error"},"200":{"schema":{"$ref":"#/definitions/PagedPostResponse«MfaAuditLogDto»"},"description":"OK"},"403":{"description":"Forbidden"}},"summary":"Retrieves all the audits for the MFA","operationId":"getMfaAuditLogUsingPOST","tags":["MFA Audit"],"security":[{"token":["global"]},{"cspAuthentication":["platform_operator"]}],"description":"Retrieves all the audits for the MFA de/activation, enable/disable, login, login using recovery code and recovery code generation/deletion. The events received are sorted by date in descending order ie the most recent ones will apear first. \n### Access Policy:\n| Role | User Accounts | Service Accounts (Client Credentials Applications)  |\n| ----- | ----- | ---------- |\n| Organization Member | &#x0274c; | &#x0274c; |\n| Organization Owner | &#x0274c; | &#x0274c; |\n| Service Owner | &#x0274c; | &#x0274c; |\n| Support User | &#x0274c; | &#x0274c; |\n| Read-only Operator | &#x2714;&#xFE0F; | &#x0274c; |\n","parameters":[{"description":"MFA Audit Log","in":"body","name":"auditLogRequest","schema":{"$ref":"#/definitions/MfaAuditLogRequest"},"required":true}]}},"/iam/vmwid/api/principal/mfa":{"patch":{"responses":{"400":{"description":"Password was not provided"},"401":{"description":"Unauthenticated User"},"404":{"description":"No user with given token exists | MFA details for principal user were not found"},"403":{"description":"Wrong password provided"},"200":{"schema":{"$ref":"#/definitions/UpdateMfaResponse"},"description":"OK"},"500":{"description":"Internal Server Error"}},"summary":"Update Principal MFA","operationId":"updatePrincipalMfaUsingPATCH","tags":["Principal MFA"],"security":[{"token":["global"]}],"description":"Update user MFA for principal account (currently supported attributes are \"turnedOn\".<br>Principal user is identified via a token. The token should be passed in a header called csp-auth-token.\n### Access Policy:\n| Role | User Accounts | Service Accounts (Client Credentials Applications)  |\n| ----- | ----- | ---------- |\n| All Roles | &#x2714;&#xFE0F; | &#x0274c; |\n","parameters":[{"description":"Principal MFA update details","in":"body","name":"updateMfaRequest","schema":{"$ref":"#/definitions/UpdateMfaRequest"},"required":true}]}}}}